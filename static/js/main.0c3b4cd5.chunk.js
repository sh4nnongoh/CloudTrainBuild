(this["webpackJsonptest-ts-1"]=this["webpackJsonptest-ts-1"]||[]).push([[0],{157:function(e,t,a){e.exports=a(215)},163:function(e,t,a){},200:function(e,t,a){},203:function(e,t,a){var n={"./1.json":[216,4]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a.t(r,3)}))}r.keys=function(){return Object.keys(n)},r.id=203,e.exports=r},204:function(e,t,a){var n={"./1.png":[217,3]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a.t(r,7)}))}r.keys=function(){return Object.keys(n)},r.id=204,e.exports=r},206:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);a(158);var n,r=a(1),l=a.n(r),c=a(30),o=a.n(c),i=(a(163),a(42)),s=a(9),u=a(249),m=a(142),d=a(246),E=a(251),b=a(67),f=a(109),p=a(97),g=a.n(p),h={Timer:{duration:30,unit:"minutes"},Auth:{region:"ap-southeast-1",userPoolId:"ap-southeast-1_hsR6uwojS",userPoolWebClientId:"33au4lnne25vamdka4q0s1g198",mandatorySignIn:!0},API:{endpoints:[{name:"CloudTrain",endpoint:"https://ymfzc74lkl.execute-api.ap-southeast-1.amazonaws.com/staging"}]}},O=a(137);!function(e){e.Get="get",e.Post="post"}(n||(n={}));var v=function(e,t,a,n){return b.a.currentSession().then((function(r){return O.a[e](t,a,{headers:{Authorization:"Bearer ".concat(r.getIdToken().getJwtToken())},body:n})}))},j={Method:n,InvokeAPI:v,TearDownEnvironment:function(){return v(n.Post,"CloudTrain","/v1/tear-down-environment")},UpdateParticipantResult:function(){return v(n.Post,"CloudTrain","/v1/update-participant-result")},GetParticipantResult:function(){return v(n.Get,"CloudTrain","/v1/participant-result")},GetAccountAvailability:function(){return v(n.Get,"CloudTrain","/v1/account-availability")},AssignParticipantToAccount:function(){return v(n.Post,"CloudTrain","/v1/assign-participant-to-account")},AssignGroupToParticipant:function(){return v(n.Post,"CloudTrain","/v1/assign-group-to-participant")}},S=(a(200),{hours:-1,minutes:-1,seconds:-1}),w=function(e){var t=e.setView,a=e.setCurrentState,n=e.createDate,c=Object(r.useState)(Object(f.a)({},S)),o=Object(s.a)(c,2),i=o[0],u=o[1];Object(r.useEffect)((function(){var e=function(){return j.TearDownEnvironment().then((function(){a("terminating"),t("EndLab")}))},r=setTimeout((function(){console.log(i),u(function(){var t=g()(n).add(h.Timer.duration,h.Timer.unit),a=g.a.duration(t.diff(g.a.now())).asSeconds(),r=Object(f.a)({},S);return a>=0?r={hours:Math.floor(a/3600%24),minutes:Math.floor(a/60%60),seconds:Math.floor(a%60)}:e(),r}()),0===i.hours&&0===i.minutes&&0===i.seconds&&(clearTimeout(r),e())}),1e3);return function(){return clearTimeout(r)}}));var m=function(e,t){for(var a="".concat(e);a.length<t;)a="0".concat(a);return a};return l.a.createElement(l.a.Fragment,null,-1!==i.hours&&l.a.createElement("span",{className:"timer","data-testid":"timer"},m(i.hours,2)," : ",m(i.minutes,2)," : ",m(i.seconds,2)))},C=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Your Lab has ended."),l.a.createElement("div",{className:"text-blob"},"Please check back later to redo your lab."))},k=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Congratulations!"),l.a.createElement("div",{className:"text-blob"},"You have completed the Cloud Training Lab."))},P=a(108),N=a(244),y=a(245),I=a(247),T=function(e){var t=e.setView,a=e.name,n=e.description,c=e.steps,o=e.accountId,i=e.imgPath,u=e.endpoint,E=e.endpointPath,b=Object(r.useState)([]),f=Object(s.a)(b,2),p=f[0],g=f[1],h=Object(r.useState)([]),O=Object(s.a)(h,2),v=O[0],S=O[1],w=Object(r.useState)(!1),C=Object(s.a)(w,2),k=C[0],T=C[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,a),l.a.createElement("div",{className:"text-blob"},n),l.a.createElement(N.a,{src:i,alt:"Architecture",fluid:!0}),l.a.createElement("br",null),l.a.createElement(y.a,{className:"info-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"S/N"),l.a.createElement("td",null,"Step"),l.a.createElement("td",null,"Details"))),l.a.createElement("tbody",null,c.map((function(e,t){return l.a.createElement(l.a.Fragment,{key:e.name},l.a.createElement("tr",null,l.a.createElement("td",{rowSpan:e.details.length+1},t+1),l.a.createElement("td",{rowSpan:e.details.length+1},e.name)),e.details.map((function(e){return l.a.createElement("tr",{key:e},l.a.createElement("td",null,e))})))})))),l.a.createElement("br",null),l.a.createElement(m.a,{onClick:function(){return T(!0),j.InvokeAPI(j.Method.Post,u,E,{accountId:o}).then((function(e){console.log(e),g(e.valid),S(e.invalid),T(!1)})).catch((function(e){console.log("ERROR: ".concat(e))}))},disabled:k},k&&l.a.createElement(d.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Validate"),l.a.createElement(m.a,{onClick:function(){return t("Home")},disabled:0===p.length||v.length>0},"Next"),Object(P.a)(v).reverse().map((function(e){return l.a.createElement(I.a,{key:e,variant:"warning"},e)})),Object(P.a)(p).reverse().map((function(e){return l.a.createElement(I.a,{key:e,variant:"success"},e)})),l.a.createElement("br",null),l.a.createElement("br",null))},L=function(){return l.a.createElement(d.a,{animation:"grow"})},A=function(e){var t=e.setView,n=e.progress,c=e.accountId,o=e.setCurrentState,i=Object(r.useState)({name:"",description:"",steps:[],imgPath:"",endpoint:"",endpointPath:""}),u=Object(s.a)(i,2),m=u[0],d=u[1],E=Object(r.useState)(!0),b=Object(s.a)(E,2),f=b[0],p=b[1];return Object(r.useEffect)((function(){switch(n){case 0:Promise.all([a(203)("./".concat(n+1,".json")),a(204)("./".concat(n+1,".png"))]).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];d({name:a.name,description:a.description,steps:a.steps,imgPath:n.default,endpoint:a.endpoint,endpointPath:a.endpointPath}),p(!1)}));break;default:Promise.all([j.TearDownEnvironment(),j.UpdateParticipantResult()]).then((function(){o("terminating"),t("Finish")}))}}),[n,t,o]),l.a.createElement(l.a.Fragment,null,f&&l.a.createElement(L,null),!f&&l.a.createElement(T,{name:m.name,description:m.description,steps:m.steps,setView:t,accountId:c,imgPath:m.imgPath,endpoint:m.endpoint,endpointPath:m.endpointPath}))},U=a(248),x=function(e){var t=e.setView,a=Object(r.useState)(!0),n=Object(s.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(!0),u=Object(s.a)(i,2),E=u[0],b=u[1],f=Object(r.useState)({url:"",username:"",password:""}),p=Object(s.a)(f,2),g=p[0],h=p[1],O=Object(r.useState)(!1),v=Object(s.a)(O,2),S=v[0],w=v[1];Object(r.useEffect)((function(){j.AssignParticipantToAccount().then((function(e){console.log(e),h({url:e.credential.url,username:e.credential.username,password:e.credential.password}),o(!1)})).catch((function(e){console.log("ERROR: ".concat(e))}))}),[]);return l.a.createElement(l.a.Fragment,null,c&&l.a.createElement(L,null),!c&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Pre-Lab Notice"),l.a.createElement("div",{className:"text-blob"},"Below are your lab credentials. Do login to the lab account and change your password before proceeding."),l.a.createElement(y.a,{borderless:!0,className:"info-table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Lab URL:"),l.a.createElement("td",null,l.a.createElement("a",{href:g.url,className:"link",target:"_blank",rel:"noopener noreferrer"},g.url))),l.a.createElement("tr",null,l.a.createElement("td",null,"Username:"),l.a.createElement("td",null,g.username)),l.a.createElement("tr",null,l.a.createElement("td",null,"Password:"),l.a.createElement("td",null,g.password)))),l.a.createElement("div",{className:"declaration"},l.a.createElement(U.a.Checkbox,{"data-testid":"checkbox",onClick:function(){return b(!E)},"aria-label":"Checkbox for acknowledging the T&Cs"}),l.a.createElement("div",{className:"text"},"I acknowledge that this is the only time I can view these credentials, and that I have already changed the default password assigned to me.")),l.a.createElement(m.a,{onClick:function(){b(!0),w(!0),j.AssignGroupToParticipant().then((function(){return t("Home")}))},disabled:E},S&&l.a.createElement(d.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Continue")))},G=function(e){var t=e.setView,a=e.setAccountId,n=e.setCurrentState,c=e.setCreateDate,o=e.setProgress,i=Object(r.useState)(0),u=Object(s.a)(i,2),d=u[0],E=u[1],b=Object(r.useState)(!0),f=Object(s.a)(b,2),p=f[0],g=f[1],O=Object(r.useState)(!0),v=Object(s.a)(O,2),S=v[0],w=v[1];return Object(r.useEffect)((function(){j.GetParticipantResult().then((function(e){var a;return console.log(e),e.Completed?t("Finish"):a=j.GetAccountAvailability(),a})).then((function(e){if(console.log(e),e)switch(a(e.AccountId),n(e.CurrentState),c(e.CreateDate),o(e.Progress),e.CurrentState){case"active":t("Scenario");break;case"terminating":t("EndLab");break;default:E(e.Count),w(!1)}})).catch((function(e){console.log("ERROR: ".concat(e))}))}),[]),l.a.createElement(l.a.Fragment,null,S&&l.a.createElement(L,null),!S&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Welcome to Cloud Train!"),l.a.createElement("div",{className:"text-blob"},"There are currently"," ",d," ","account(s) available."),d>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"declaration"},l.a.createElement(U.a.Checkbox,{"data-testid":"checkbox",onClick:function(){return g(!p)},"aria-label":"Checkbox for acknowledging the T&Cs"}),l.a.createElement("div",{className:"text"},"I acknowledge that once the lab has started, I only have"," ",h.Timer.duration," ",h.Timer.unit," ","to complete it before my access to the lab is revoked. If I fail to complete it within the time frame, I will have to rejoin the queue and start over.")),l.a.createElement(m.a,{disabled:p,onClick:function(){return t("PreLab")}},"Start Lab")),0===d&&l.a.createElement("div",null,"Please come back later.")))},F=a(250),R=function(e){var t=e.setView,a=e.setEmail,n=Object(r.useState)(""),c=Object(s.a)(n,2),o=c[0],i=c[1],u=Object(r.useState)(""),d=Object(s.a)(u,2),E=d[0],f=d[1],p=Object(r.useState)(""),g=Object(s.a)(p,2),h=g[0],O=g[1],v=Object(r.useState)(""),j=Object(s.a)(v,2),S=j[0],w=j[1],C=!o||!E||!h||E!==h;return l.a.createElement(F.a,{className:"form"},l.a.createElement("h3",null,"Sign Up"),l.a.createElement(F.a.Group,null,l.a.createElement("span",{className:"info-link"},"Already have an account?"," "),l.a.createElement(m.a,{onClick:function(){return t("SignIn")},className:"link"},"Sign In")),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Email address"),l.a.createElement(F.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return i(e.target.value)}})),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Password"),l.a.createElement(F.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return f(e.target.value)}})),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Re-enter Password"),l.a.createElement(F.a.Control,{type:"password",placeholder:"Re-enter Password",onChange:function(e){return O(e.target.value)}})),l.a.createElement(m.a,{disabled:C,onClick:function(){b.a.signUp({username:o,password:E,attributes:{email:o}}).then((function(e){console.log(e),t("ConfirmSignUp"),a(o)})).catch((function(e){console.log("error signing up:",e),w(e.message)}))}},"Sign Up"),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,{className:"error"},S)))},V=function(e){var t=e.setView,a=e.setEmail,n=e.setSignIn,c=Object(r.useState)(""),o=Object(s.a)(c,2),i=o[0],u=o[1],E=Object(r.useState)(""),f=Object(s.a)(E,2),p=f[0],g=f[1],h=Object(r.useState)(""),O=Object(s.a)(h,2),v=O[0],j=O[1],S=Object(r.useState)(!1),w=Object(s.a)(S,2),C=w[0],k=w[1],P=!i||!p||C;return l.a.createElement(F.a,null,l.a.createElement("h3",null,"Sign In"),l.a.createElement(F.a.Group,null,l.a.createElement("span",{className:"info-link"},"Do not have an account?"," "),l.a.createElement(m.a,{onClick:function(){return t("SignUp")},className:"link"},"Register")),l.a.createElement(F.a.Group,{className:"form-group"},l.a.createElement(F.a.Label,null,"Email address"),l.a.createElement(F.a.Control,{type:"email",className:"form-control",placeholder:"Enter email",onChange:function(e){return u(e.target.value)}})),l.a.createElement(F.a.Group,{className:"form-group"},l.a.createElement(F.a.Label,null,"Password"),l.a.createElement(F.a.Control,{type:"password",className:"form-control",placeholder:"Enter password",onChange:function(e){return g(e.target.value)}})),l.a.createElement(m.a,{onClick:function(){return k(!0),b.a.signIn({username:i,password:p}).then((function(e){console.log(e),a(i),n(!0),t("Home")})).catch((function(e){console.log("error signing up:",e),"UserNotConfirmedException"===e.code?(a(i),t("ConfirmSignUp")):(j(e.message),k(!1))}))},disabled:P},C&&l.a.createElement(d.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Submit"),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,{className:"error"},v)))},D=function(e){var t=e.email,a=e.setView,n=Object(r.useState)(""),c=Object(s.a)(n,2),o=c[0],i=c[1],u=Object(r.useState)(""),d=Object(s.a)(u,2),E=d[0],f=d[1],p=!o;return l.a.createElement(F.a,{className:"form"},l.a.createElement("h3",null,"Confirm Sign Up"),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Code"),l.a.createElement(F.a.Control,{type:"text",placeholder:"Enter code",onChange:function(e){return i(e.target.value)}})),l.a.createElement(m.a,{disabled:p,onClick:function(){b.a.confirmSignUp(t,o).then((function(e){console.log(e),a("SignIn")})).catch((function(e){console.log("error signing up:",e),f(e.message)}))}},"Sign Up"),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,{className:"error"},E)))},z=(a(206),function(){var e=Object(r.useState)("SignIn"),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),o=Object(s.a)(c,2),i=o[0],f=o[1],p=Object(r.useState)(!1),g=Object(s.a)(p,2),h=g[0],O=g[1],v=Object(r.useState)(""),S=Object(s.a)(v,2),P=S[0],N=S[1],y=Object(r.useState)(""),I=Object(s.a)(y,2),T=I[0],L=I[1],U=Object(r.useState)(""),F=Object(s.a)(U,2),z=F[0],M=F[1],H=Object(r.useState)(""),_=Object(s.a)(H,2),B=_[0],J=_[1],q=Object(r.useState)(!1),W=Object(s.a)(q,2),Y=W[0],K=W[1],Q=Object(r.useState)(0),X=Object(s.a)(Q,2),Z=X[0],$=X[1];Object(r.useEffect)((function(){b.a.currentSession().then((function(e){console.log(e),L(e.getAccessToken().payload.username),K(!0),n("Home")})).catch((function(e){console.log(e)}))}),[]);var ee=function(){f(!1)},te="terminating"===B?"Ending Lab":"End Lab";return l.a.createElement("div",{className:"app"},l.a.createElement(u.a,{show:i,onHide:ee},l.a.createElement(u.a.Header,{closeButton:!0},l.a.createElement(u.a.Title,null,"Are you sure?")),l.a.createElement(u.a.Body,null,"This action will revoke your access to the lab, and tear down the lab environment. It will take a while before you can redo the lab."),l.a.createElement(u.a.Footer,null,l.a.createElement(m.a,{variant:"secondary",onClick:ee},"Close"),l.a.createElement(m.a,{variant:"danger",onClick:function(){O(!0),j.TearDownEnvironment().then((function(){J("terminating"),ee(),n("EndLab")}))},disabled:h},h&&l.a.createElement(d.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Confirm"))),l.a.createElement("div",{className:"app-header"},P&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"left-header"},l.a.createElement(m.a,{onClick:function(){return f(!0)},variant:"danger",disabled:"terminating"===B},te),"terminating"!==B&&l.a.createElement(w,{setView:n,setCurrentState:J,createDate:z})),l.a.createElement("span",{className:"info-link"},"Lab URL :"," "),l.a.createElement(m.a,{variant:"link",className:"link",href:"https://".concat(P,".signin.aws.amazon.com/console"),target:"_blank"},"https://",P,".signin.aws.amazon.com/console")),Y&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"info-link"},"Account :"," "),l.a.createElement(E.a,null,l.a.createElement(E.a.Toggle,{className:"link"},T),l.a.createElement(E.a.Menu,null,l.a.createElement(E.a.Item,{onClick:function(){b.a.signOut().then((function(){N(""),L(""),M(""),J(""),K(!1),$(0),n("SignIn")}))}},"Sign Out"))))),l.a.createElement("div",{className:"app-body"},"Home"===a&&l.a.createElement(G,{setView:n,setAccountId:N,setCurrentState:J,setCreateDate:M,setProgress:$}),"SignIn"===a&&l.a.createElement(V,{setView:n,setEmail:L,setSignIn:K}),"SignUp"===a&&l.a.createElement(R,{setView:n,setEmail:L}),"ConfirmSignUp"===a&&l.a.createElement(D,{setView:n,email:T}),"PreLab"===a&&l.a.createElement(x,{setView:n}),"Scenario"===a&&l.a.createElement(A,{setView:n,progress:Z,accountId:P,setCurrentState:J}),"Finish"===a&&l.a.createElement(k,null),"EndLab"===a&&l.a.createElement(C,null)))});i.default.configure(h),o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(z,null)),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.0c3b4cd5.chunk.js.map